---
import Base from '@/layouts/Base.astro'
import Prose from '@/components/Prose.astro'
import TableOfContents from '@/components/TableOfContents.astro'
import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  const posts = await getCollection('blog')
  return posts.map(p => ({ params: { slug: p.slug }, props: { post: p } }))
}
const { post } = Astro.props
const { Content } = await post.render()
---
<Base title={`${post.data.title} â€“ Autumn`}>
  <TableOfContents />
  <article class="mt-4">
    <header class="mb-6">
      <h1 class="text-3xl font-semibold tracking-tight">{post.data.title}</h1>
      <time class="text-sm text-text-muted">{new Date(post.data.date).toLocaleDateString()}</time>
    </header>
    <Prose>
      <Content />
    </Prose>
  </article>
</Base>
